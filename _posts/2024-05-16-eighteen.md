---
layout: single
title: "RAG(Retrieval Augmented Generation)은 무엇인가?"
categories: AI
---

# 생성AI모델, 정확성과 신뢰성 향상 시키는 "검색증강생성(RAG, Retrieval Augmented Generation)"은 무엇인가?



## 생성 AI의 최근 발전을 더 현실적으로 이해하기 위해 법정의 모습을 생각해 보자

- 판사는 법에 대한 일반적인 이해를 바탕으로 사건을 심리하고 판결한다. 의료 과실 소송이나 노동 분쟁과 같이 특별한 전문 지식이 필요한 사건의 경우, 판사는 법원 서기관에게 인용할 수 있는 판례와 구체적인 사례를 찾게 한다.

- 훌륭한 판사처럼 대형언어모델(LLM)은 다양한 사람의 질의에 응답할 수 있다. 하지만 출처가 정확한 신뢰할 수 있는 답변을 제공하려면, 조사를 수행할 조수가 필요하다.

이와 같이  '검색 증강 생성(Retrieval Augmented Generation. 이하, RAG)'라고 하는 프로세스가 AI처럼 법원 서기관의 역할을 한다.



RAG를 "범용 미세 조정 레시피"라고 하며  외부소스에서 가져온 정보로 생성 AI모델의 정확성과 신뢰성을 향상시키는 기술

** RAG 는 LLM의 작동 방식에서 부족한 부분을 채워주는 기술이다.** 

- LLM은 내부적으로 신경망이며, 일반적으로 얼마나 많은 매개변수가 포함되어 있는지에 따라 측정된다. LLM의 매개벼수는 기본적으로 인간이 단어를 사용해 문장을 구성하는 일반적인 패턴을 나타낸다.
- LLM은 일반적인 프롬프트에 빠른 속도로 응답하는 데 유용하다. 그러나 최신주제나 특정 주제애 대해 더 깊이 알고 싶어하는 사용자에게는 적합하지 않다.



## 내부와 외부 리소스의 결합

패트릭 루이스와 동료들은 RAG 기술을 개발해 생성 AI 서비스에 외부 리소스, 특히 최신 기술 정보가 풍부한 리소스에 연결했다. ==>  생성 AI에 사용자가 원하는 최신의 신뢰할수 있는 더 정확한 정보를 얻기 위해 연구논문의 각주처럼 모델이 인용할수 있는 내/외부의 소스를 제공하여  모델이 잘못된 정보를 제공하거나 잘못된 추측을 할 가능성인 AI 환각현상(Hallucinatiion)을 감소시킬수 있다. 

- AI가 추가 데이터세트로 모델을 재훈련 하는 것보다 더 빠르고 비용이 적게 들며 또한 사용자가 새로운 소스를 즉시 핫스왑(Hot-swap)할수 있다.



## RAG를 사용하는 방법

사용자는 RAG를 통해 기본적으로 데이터 저장소와 대화할 수 있고, 새로운 경험을 하게 된다. 즉, RAG의 응용 분야는 사용 가능한 데이터 세트 수의 몇 배에 달한다.

- 예를 들어, 의료 지수로 보강된 생성형 AI 모델은 의사나 간호사를 위한 훌륭한 보조 도구가 될 수 있다
- 재무 분석가는 시장 데이터에 연결된 비서의 도움을 받을 수 있다.

- 실제로 거의 모든 비즈니스에서 기술, 정책 매뉴얼, 동영상, 로그 등을 지식 베이스라는 리소스로 전환해 LLM을 향상시킬 수 있다. 이러한 리소스는 고객과 현장 지원, 직원 교육, 개발자 생산성 등의 분야에서 활용될 수 있다.

출처 : 인공지능신문(https://www.aitimes.kr)



## RAG의 작동 방식

예) 기업내 내부 리소스 형태의 지식베이스(Knolege Base) 와 생성형 AI모델이 있다.

- 지식베이스에는  법률, 프로그래밍 코딩, 마케딩관련,  조직의 핵심 기술 등의 저장소(Metadata) 임

사용자가 LLM에 질문을 하면 AI 모델은 기계가 읽을 수 있도록 쿼리를 숫자 형식으로 변환하는 다른 모델에 쿼리를 전송한다. 쿼리의 숫자 버전을 임베딩 또는 벡터라고 부른다.

그런 다음 임베딩 모델은 이러한 숫자 값을 기계가 읽을 수 있는 지식 기반의 인덱스에서 벡터와 비교한다. 일치하는 항목이 하나 또는 여러 개 발견되면 관련 데이터를 검색해 사람이 읽을 수 있는 단어로 변환한 후 LLM에 다시 전송한다.

마지막으로 LLM은 검색된 단어와 쿼리에 대한 자체 응답을 결합해 임베딩 모델이 찾은 소스를 인용하고 사용자에게 최종 답변을 제시한다.
![RAG작동원리_1](https://github.com/ChanWoo-Jung/ChanWoo-Jung.github.io/assets/100073385/07fe208e-b6b0-40ca-9aa7-67b7f94bb3dc)
