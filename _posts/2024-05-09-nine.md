---
layout: single
title: "Cardinality의 의미"
categories: SQL
---

# Cardinality(중복도)의 의미


![image-20240508134833888](C:\Users\황혜림(Wi-Fi)\AppData\Roaming\Typora\typora-user-images\image-20240508134833888.png)



![image-20240508134917054](C:\Users\황혜림(Wi-Fi)\AppData\Roaming\Typora\typora-user-images\image-20240508134917054.png)

![image-20240508143418522](C:\Users\황혜림(Wi-Fi)\AppData\Roaming\Typora\typora-user-images\image-20240508143418522.png)

![image-20240508143922120](C:\Users\황혜림(Wi-Fi)\AppData\Roaming\Typora\typora-user-images\image-20240508143922120.png)



![image-20240508154601243](C:\Users\황혜림(Wi-Fi)\AppData\Roaming\Typora\typora-user-images\image-20240508154601243.png)

**Cardinality** 

특정 Table의 전체 행에 대한 중복 추치를 나타내는 지표 

중복도가 "낮으면" 카디널리티가 "높다"라고 표현

중복도가 "높으면" 카디널리티가 "낮다" 라고 표현

예) 주민번호의 경우 중복되는 값이 없으므로 -> 카디널리티가 높다.

​     이름의 경우 주민번호에 비해 중복되는 값이 많으므로 -> 상대적으로 카디널리치가 낮다. 

카디널리티라는 용어는 두 가지 다른 의미로 사용됩니다. 데이터 모델링에서 사용할 때와 SQL 문에서 사용할 때입니다. 데이터 모델링에서 사용할 때 카디널리티는 한 테이블이 다른 테이블과 가질 수 있는 관계를 나타냅니다. 다대다, 다대일/일대다 또는 일대일의 테이블 간의 관계를 카디널리티라고 합니다. SQL에서 사용할 때는 해당 열에 대한 테이블에 나타나는 고유한 값의 수를 나타냅니다.

 

## data modeling 에서의 cardinality 

회사에서 직원 정보를 저장하는 데 사용하는 세 개의 테이블(Employee 테이블, Employee_Salary 테이블 및 Department 테이블)이 있다고 가정합니다. 모든 직원은 하나의 부서에만 속할 수 있지만 부서는 여러 직원으로 구성될 수 있기 때문에 부서 테이블은 Employee 테이블과 일대다 관계를 갖습니다. 즉, 직원 테이블과 관련된 부서 테이블의 카디널리티는 일대다입니다. Employee_Salary 테이블과 관련된 Employee 테이블의 카디널리티는 직원이 하나의 급여만 가질 수 있고 그 반대도 마찬가지이므로 일대일입니다(예, 두 명의 직원이 동일한 급여를 가질 수 있지만 여전히 정확히 하나의 급여 항목이 있습니다. 다른 사람이 동일한 급여를 받는지 여부에 관계없이 각 직원에 대해).

만일, 한명의 직원이 여러 부서에 소속될 수 있다고 한다면 부서와 직원간의 관계는 다대다 관계입니다.

 

## SQL에서의 Cardinality 

카디널리티의 다른 정의는 아마도 용어의 더 일반적으로 사용되는 버전일 것입니다.
SQL에서 주어진 테이블에 있는 열의 카디널리티는 해당 열에 대한 테이블에 나타나는 고유한 값의 수를 나타냅니다. 따라서 카디널리티는 숫자라는 것을 기억하십시오. 예를 들어 "남성"과 "여성"이라는 두 가지 가능한 값만 있는 "성별" 열이 있는 테이블이 있다고 가정해 보겠습니다. 그런 다음 해당 열에 나타날 수 있는 고유한 값은 남성과 여성이라는 두 가지뿐이므로 해당 "성별" 열의 카디널리티는 2입니다. Cardinality정보는 Execution Plan 정보에서 볼 수 있습니다.

### primary key의 cardinality 

또는 다른 예로 10,000개의 행이 있는 테이블에 기본 키 열이 있다고 가정해 보겠습니다. 해당 열의 카디널리티는 무엇이라고 생각합니까? 자, 10,000입니다. 기본 키 열이기 때문에 열의 모든 값이 고유해야 함을 알고 있습니다. 그리고 10,000개의 행이 있기 때문에 열에 10,000개의 항목이 있다는 것을 알고 있으며, 이는 해당 열에 대해 10,000개의 카디널리티로 변환됩니다. 따라서 기본 키 열의 카디널리티는 항상 동일한 테이블의 레코드 수와 동일하다는 규칙을 생각해낼 수 있습니다

### cardinality 가 0 이라는 의미는?

열의 카디널리티가 0이면 열에 고유한 값이 없음을 의미합니다. 이것은 열의 값이 NULL인 경우입니다.

이는 열이 실제로 사용되지 않았음을 의미합니다.



## **인덱스(Index) 설계

```
인덱스 선택 및 순서에 따라 인덱스를 이용한 스캔을 하므로
인덱스를 설계할 때부터 순서를 유의해서 만들어야 합니다.
- 조건절에 항상 또는 자주 사용되는 컬럼 선택
- '='조건으로 자주 조회되는 컬럼들을 앞쪽 순서에 위치
- 분포도가 좋은 컬럼 선정 (분포도 15% 이내)
```

![index cardinality_1](C:\Users\황혜림(Wi-Fi)\Documents\GitHub\Cloud\jinmo1.github.io\images\2024-05-09-nine\index cardinality_1.JPG)

**인덱스(Index) 설계절차**
인덱스 설계절차는 크게 3 부분으로 이루어져 있습니다.

1. 접근경로 수집

- 반복 수행되는 접근경로 :  Join 컬럼

-  분포도가 양호한 컬럼

-  조회조건에 사용되는 컬럼

-  자주 결합되어 사용되는 컬럼

-  데이터 정렬 순서와 그룹핑 컬럼

-  일련번호를 부여한 컬럼

-  통계 자료 추출 조건

-  조회 조건이나 조인조건 연산자

  

  2. 분포도에 의한 후보 컬럼 선정

  - 분포도 10~15% 선정 추천

  ​     분포도(%) =  데이터별 평균 row 수 / 테이블의 총 row수 X 100

   

  3. 컬럼 조합 및 순서 결정

  - 항상 사용되는 컬럼을 선두컬럼 선정

  - 등치(=) 조건으로 사용되는 컬럼을 선행컬럼으로 선정

  - ORDER BY, GROUP BY 순서 적
